{"ast":null,"code":"import _regeneratorRuntime from\"/home/ankur12/Desktop/dev/google-classroom-clone-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ankur12/Desktop/dev/google-classroom-clone-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ankur12/Desktop/dev/google-classroom-clone-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./App.css';import Signup from'./components/signup/signup';import Login from'./components/login/login';import LandingPage from'./components/landingPage/LandingPage';import{Route,Switch,withRouter,Redirect}from'react-router-dom';import HomePage from'./components/homePage/HomePage';import NavBar from'./components/navbar/navbar';import{withAlert}from'react-alert';import Assignments from'./components/assignments/Assignments';import{myaxios,authorize}from'./connections';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];var fetchLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.getItem('token')){_context.next=20;break;}_context.prev=1;authorize(localStorage.getItem('token'),setLoggedIn);_context.next=5;return myaxios({method:\"GET\",url:\"/auth/userstatus/\"});case 5:res=_context.sent;console.log(res);if(!(res.status===200)){_context.next=9;break;}return _context.abrupt(\"return\",setLoggedIn(true));case 9:_context.next=18;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.log(_context.t0.response);if(!(_context.t0.response.status===400||_context.t0.response.status===401)){_context.next=18;break;}localStorage.removeItem('token');delete myaxios.defaults.headers.common['Authorization'];return _context.abrupt(\"return\",setLoggedIn(false));case 18:_context.next=21;break;case 20:return _context.abrupt(\"return\",setLoggedIn(false));case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function fetchLogin(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchLogin();},[]);if(loggedIn){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavBar,{setLoggedIn:setLoggedIn}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/homePage\",children:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/Assignments\",children:/*#__PURE__*/_jsx(Assignments,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"*\",children:/*#__PURE__*/_jsx(HomePage,{})})]})]});}else{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",children:/*#__PURE__*/_jsx(Login,{setLoggedIn:setLoggedIn})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signup\",children:/*#__PURE__*/_jsx(Signup,{setLoggedIn:setLoggedIn})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(LandingPage,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"*\",children:/*#__PURE__*/_jsx(LandingPage,{})})]})});}}export default withRouter(App);","map":{"version":3,"sources":["/home/ankur12/Desktop/dev/google-classroom-clone-frontend/src/App.js"],"names":["React","useEffect","useState","Signup","Login","LandingPage","Route","Switch","withRouter","Redirect","HomePage","NavBar","withAlert","Assignments","myaxios","authorize","App","loggedIn","setLoggedIn","fetchLogin","localStorage","getItem","method","url","res","console","log","status","response","removeItem","defaults","headers","common"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport Signup from './components/signup/signup';\nimport Login from './components/login/login';\nimport LandingPage from './components/landingPage/LandingPage';\nimport { Route, Switch, withRouter, Redirect} from 'react-router-dom';\nimport HomePage from './components/homePage/HomePage';\nimport NavBar from './components/navbar/navbar';\nimport { withAlert } from 'react-alert'\nimport Assignments from './components/assignments/Assignments';\nimport { myaxios, authorize } from './connections'\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false)\n\n  const fetchLogin = async function() {\n    if(localStorage.getItem('token')) {\n      try {\n        authorize(localStorage.getItem('token'), setLoggedIn)\n        const res = await myaxios({\n          method: \"GET\",\n          url: \"/auth/userstatus/\"\n        })\n        console.log(res)\n        if(res.status === 200) {\n          return setLoggedIn(true)\n        }\n      } catch(err) {\n        console.log(err.response)\n        if(err.response.status === 400 || err.response.status === 401) {\n          localStorage.removeItem('token')\n          delete myaxios.defaults.headers.common['Authorization']\n          return setLoggedIn(false)\n        }\n      }\n    } else {\n      return setLoggedIn(false)\n    }\n  }\n  \n  useEffect(() => {\n    fetchLogin()\n  },[])\n\n\n\n  if(loggedIn) {\n    return (\n      <div>\n        <NavBar setLoggedIn={setLoggedIn}/>\n        <Switch>\n          <Route exact path=\"/homePage\">\n            <HomePage/>\n          </Route>\n          <Route exact path=\"/Assignments\">\n            <Assignments/>\n          </Route>\n          <Route exact path=\"*\">\n            <HomePage/>\n          </Route>\n        </Switch>\n      </div>\n    )\n  } else {\n    return (\n      <div>\n        <Switch>\n          <Route exact path=\"/login\">\n            <Login setLoggedIn={setLoggedIn}/>\n          </Route>\n          <Route exact path=\"/signup\">\n            <Signup setLoggedIn={setLoggedIn}/>\n          </Route>\n          <Route exact path=\"/\">\n            <LandingPage/>\n          </Route>\n          <Route exact path=\"*\">\n            <LandingPage/>\n          </Route>\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}