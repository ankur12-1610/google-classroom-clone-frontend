{"ast":null,"code":"import _slicedToArray from\"/home/ankur12/Desktop/dev/google-classroom-clone-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/home/ankur12/Desktop/dev/google-classroom-clone-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ankur12/Desktop/dev/google-classroom-clone-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useState}from'react';import{Nav,NavDropdown,Navbar,Container,Button}from'react-bootstrap';import UserIcon from'./user.png';import Menu from'./hamburger/hamburger';import{myaxios,authorize}from'../../connections';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function NavBar(_ref){var setLoggedIn=_ref.setLoggedIn;var onLogout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:localStorage.removeItem('token');_context.prev=1;_context.next=4;return myaxios({method:\"POST\",url:\"/auth/logout/\"});case 4:res=_context.sent;console.log(res);if(res.data.detail===\"Successfully logged out.\"){localStorage.removeItem('token');delete myaxios.defaults.headers.common['Authorization'];setLoggedIn(false);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0.response);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function onLogout(){return _ref2.apply(this,arguments);};}();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];useEffect(function(){var getProfile=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return myaxios({method:\"GET\",url:\"/auth/profile/\"});case 3:res=_context2.sent;console.log(res);setUsername(res.data.username);_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);console.log(_context2.t0.response);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function getProfile(){return _ref3.apply(this,arguments);};}();getProfile();},[]);return/*#__PURE__*/_jsx(Navbar,{bg:\"light\",variant:\"light\",expand:\"lg\",sticky:\"top\",style:{borderBottom:\"3px solid black\"},className:\"navbar\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Navbar.Brand,{href:\"#home\",children:/*#__PURE__*/_jsx(Menu,{})}),/*#__PURE__*/_jsx(Nav,{children:/*#__PURE__*/_jsxs(NavDropdown,{title:/*#__PURE__*/_jsx(\"img\",{src:UserIcon,width:\"30px\",height:\"30px\"}),id:\"responsive-nav-dropdown\",style:{marginRight:\"50px\",border:\"none\"},children:[/*#__PURE__*/_jsx(NavDropdown.Item,{style:{fontWeight:\"bold\"},children:username}),/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"#action/3.1\",children:\"Create another account\"}),/*#__PURE__*/_jsx(NavDropdown.Divider,{}),/*#__PURE__*/_jsx(NavDropdown.Item,{as:Button,onClick:onLogout,children:\"Logout\"})]})})]})});}","map":{"version":3,"sources":["/home/ankur12/Desktop/dev/google-classroom-clone-frontend/src/components/navbar/navbar.js"],"names":["React","useEffect","useState","Nav","NavDropdown","Navbar","Container","Button","UserIcon","Menu","myaxios","authorize","NavBar","setLoggedIn","onLogout","localStorage","removeItem","method","url","res","console","log","data","detail","defaults","headers","common","response","username","setUsername","getProfile","borderBottom","marginRight","border","fontWeight"],"mappings":"6gBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAAQC,GAAR,CAAaC,WAAb,CAA0BC,MAA1B,CAAkCC,SAAlC,CAA6CC,MAA7C,KAA0D,iBAA1D,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,uBAAjB,CACA,OAASC,OAAT,CAAkBC,SAAlB,KAAmC,mBAAnC,C,wFACA,cAAe,SAASC,CAAAA,MAAT,MAAiC,IAAfC,CAAAA,WAAe,MAAfA,WAAe,CAE5C,GAAMC,CAAAA,QAAQ,2FAAG,2IACbC,YAAY,CAACC,UAAb,CAAwB,OAAxB,EADa,sCAGSN,CAAAA,OAAO,CAAC,CACtBO,MAAM,CAAE,MADc,CAEtBC,GAAG,CAAE,eAFiB,CAAD,CAHhB,QAGHC,GAHG,eAOTC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,GAAGA,GAAG,CAACG,IAAJ,CAASC,MAAT,GAAoB,0BAAvB,CAAmD,CAC/CR,YAAY,CAACC,UAAb,CAAwB,OAAxB,EACA,MAAON,CAAAA,OAAO,CAACc,QAAR,CAAiBC,OAAjB,CAAyBC,MAAzB,CAAgC,eAAhC,CAAP,CACAb,WAAW,CAAC,KAAD,CAAX,CACH,CAZQ,+EAcTO,OAAO,CAACC,GAAR,CAAY,YAAIM,QAAhB,EAdS,oEAAH,kBAARb,CAAAA,QAAQ,2CAAd,CAF4C,cAmBZZ,QAAQ,CAAC,EAAD,CAnBI,wCAmBrC0B,QAnBqC,eAmB3BC,WAnB2B,eAqB5C5B,SAAS,CAAC,UAAM,CACZ,GAAM6B,CAAAA,UAAU,2FAAG,wLAEOpB,CAAAA,OAAO,CAAC,CACtBO,MAAM,CAAE,KADc,CAEtBC,GAAG,CAAE,gBAFiB,CAAD,CAFd,QAELC,GAFK,gBAMXC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAU,WAAW,CAACV,GAAG,CAACG,IAAJ,CAASM,QAAV,CAAX,CAPW,mFASXR,OAAO,CAACC,GAAR,eACAD,OAAO,CAACC,GAAR,CAAY,aAAIM,QAAhB,EAVW,sEAAH,kBAAVG,CAAAA,UAAU,2CAAhB,CAaAA,UAAU,GACb,CAfQ,CAeP,EAfO,CAAT,CAiBA,mBACI,KAAC,MAAD,EAAQ,EAAE,CAAC,OAAX,CAAmB,OAAO,CAAC,OAA3B,CAAmC,MAAM,CAAC,IAA1C,CAA+C,MAAM,CAAC,KAAtD,CAA4D,KAAK,CAAE,CAACC,YAAY,CAAC,iBAAd,CAAnE,CAAqG,SAAS,CAAC,QAA/G,uBACI,MAAC,SAAD,yBACI,KAAC,MAAD,CAAQ,KAAR,EAAc,IAAI,CAAC,OAAnB,uBAA4B,KAAC,IAAD,IAA5B,EADJ,cAGI,KAAC,GAAD,wBACI,MAAC,WAAD,EAAa,KAAK,cAAE,YAAK,GAAG,CAAEvB,QAAV,CAAoB,KAAK,CAAC,MAA1B,CAAiC,MAAM,CAAC,MAAxC,EAApB,CAAsE,EAAE,CAAC,yBAAzE,CAAmG,KAAK,CAAE,CAACwB,WAAW,CAAC,MAAb,CAAqBC,MAAM,CAAC,MAA5B,CAA1G,wBACI,KAAC,WAAD,CAAa,IAAb,EAAkB,KAAK,CAAE,CAACC,UAAU,CAAC,MAAZ,CAAzB,UAA+CN,QAA/C,EADJ,cAGI,KAAC,WAAD,CAAa,IAAb,EAAkB,IAAI,CAAC,aAAvB,oCAHJ,cAII,KAAC,WAAD,CAAa,OAAb,IAJJ,cAKI,KAAC,WAAD,CAAa,IAAb,EAAkB,EAAE,CAAErB,MAAtB,CAA8B,OAAO,CAAEO,QAAvC,oBALJ,GADJ,EAHJ,GADJ,EADJ,CAiBH","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {Nav, NavDropdown, Navbar, Container, Button} from 'react-bootstrap'\nimport UserIcon from './user.png'\nimport Menu from './hamburger/hamburger'\nimport { myaxios, authorize } from '../../connections'\nexport default function NavBar({ setLoggedIn }) {\n    \n    const onLogout = async function() {\n        localStorage.removeItem('token')\n        try {\n            const res = await myaxios({\n                method: \"POST\",\n                url: \"/auth/logout/\"\n            })\n            console.log(res)\n            if(res.data.detail === \"Successfully logged out.\") {\n                localStorage.removeItem('token')\n                delete myaxios.defaults.headers.common['Authorization']\n                setLoggedIn(false)\n            }\n        } catch(err) {\n            console.log(err.response)\n        }\n    }\n    const [username, setUsername] = useState(\"\")\n\n    useEffect(() => {\n        const getProfile = async function() {\n            try {\n                const res = await myaxios({\n                    method: \"GET\",\n                    url: \"/auth/profile/\",\n                })\n                console.log(res)\n                setUsername(res.data.username)\n            } catch(err) {\n                console.log(err)\n                console.log(err.response)\n            }\n        }\n        getProfile()\n    },[])\n\n    return (\n        <Navbar bg=\"light\" variant=\"light\" expand=\"lg\" sticky=\"top\" style={{borderBottom:\"3px solid black\"}} className=\"navbar\">\n            <Container>\n                <Navbar.Brand href=\"#home\">{<Menu/>}</Navbar.Brand>\n                {/* <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" /> */}\n                <Nav>\n                    <NavDropdown title={<img src={UserIcon} width=\"30px\" height=\"30px\"/>} id=\"responsive-nav-dropdown\" style={{marginRight:\"50px\", border:\"none\"}}>\n                        <NavDropdown.Item style={{fontWeight:\"bold\"}}>{username}</NavDropdown.Item>\n                        {/* <NavDropdown.Divider /> */}\n                        <NavDropdown.Item href=\"#action/3.1\">Create another account</NavDropdown.Item>\n                        <NavDropdown.Divider />\n                        <NavDropdown.Item as={Button} onClick={onLogout}>Logout</NavDropdown.Item>\n                    </NavDropdown>\n                </Nav>\n            </Container>\n        </Navbar>\n    )\n}"]},"metadata":{},"sourceType":"module"}